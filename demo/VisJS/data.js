var countries = [{"label":"Andorra-AD","loc":{"lat":"42.546245","lon":"1.601554"}},{"label":"United Arab Emirates-AE","loc":{"lat":"23.424076","lon":"53.847818"}},{"label":"Afghanistan-AF","loc":{"lat":"33.93911","lon":"67.709953"}},{"label":"Antigua and Barbuda-AG","loc":{"lat":"17.060816","lon":"-61.796428"}},{"label":"Anguilla-AI","loc":{"lat":"18.220554","lon":"-63.068615"}},{"label":"Albania-AL","loc":{"lat":"41.153332","lon":"20.168331"}},{"label":"Armenia-AM","loc":{"lat":"40.069099","lon":"45.038189"}},{"label":"Netherlands Antilles-AN","loc":{"lat":"12.226079","lon":"-69.060087"}},{"label":"Angola-AO","loc":{"lat":"-11.202692","lon":"17.873887"}},{"label":"Antarctica-AQ","loc":{"lat":"-75.250973","lon":"-0.071389"}},{"label":"Argentina-AR","loc":{"lat":"-38.416097","lon":"-63.616672"}},{"label":"American Samoa-AS","loc":{"lat":"-14.270972","lon":"-170.132217"}},{"label":"Austria-AT","loc":{"lat":"47.516231","lon":"14.550072"}},{"label":"Australia-AU","loc":{"lat":"-25.274398","lon":"133.775136"}},{"label":"Aruba-AW","loc":{"lat":"12.52111","lon":"-69.968338"}},{"label":"Azerbaijan-AZ","loc":{"lat":"40.143105","lon":"47.576927"}},{"label":"Bosnia and Herzegovina-BA","loc":{"lat":"43.915886","lon":"17.679076"}},{"label":"Barbados-BB","loc":{"lat":"13.193887","lon":"-59.543198"}},{"label":"Bangladesh-BD","loc":{"lat":"23.684994","lon":"90.356331"}},{"label":"Belgium-BE","loc":{"lat":"50.503887","lon":"4.469936"}},{"label":"Burkina Faso-BF","loc":{"lat":"12.238333","lon":"-1.561593"}},{"label":"Bulgaria-BG","loc":{"lat":"42.733883","lon":"25.48583"}},{"label":"Bahrain-BH","loc":{"lat":"25.930414","lon":"50.637772"}},{"label":"Burundi-BI","loc":{"lat":"-3.373056","lon":"29.918886"}},{"label":"Benin-BJ","loc":{"lat":"9.30769","lon":"2.315834"}},{"label":"Bermuda-BM","loc":{"lat":"32.321384","lon":"-64.75737"}},{"label":"Brunei-BN","loc":{"lat":"4.535277","lon":"114.727669"}},{"label":"Bolivia-BO","loc":{"lat":"-16.290154","lon":"-63.588653"}},{"label":"Brazil-BR","loc":{"lat":"-14.235004","lon":"-51.92528"}},{"label":"Bahamas-BS","loc":{"lat":"25.03428","lon":"-77.39628"}},{"label":"Bhutan-BT","loc":{"lat":"27.514162","lon":"90.433601"}},{"label":"Bouvet Island-BV","loc":{"lat":"-54.423199","lon":"3.413194"}},{"label":"Botswana-BW","loc":{"lat":"-22.328474","lon":"24.684866"}},{"label":"Belarus-BY","loc":{"lat":"53.709807","lon":"27.953389"}},{"label":"Belize-BZ","loc":{"lat":"17.189877","lon":"-88.49765"}},{"label":"Canada-CA","loc":{"lat":"56.130366","lon":"-106.346771"}},{"label":"Cocos [Keeling] Islands-CC","loc":{"lat":"-12.164165","lon":"96.870956"}},{"label":"Congo [DRC]-CD","loc":{"lat":"-4.038333","lon":"21.758664"}},{"label":"Central African Republic-CF","loc":{"lat":"6.611111","lon":"20.939444"}},{"label":"Congo [Republic]-CG","loc":{"lat":"-0.228021","lon":"15.827659"}},{"label":"Switzerland-CH","loc":{"lat":"46.818188","lon":"8.227512"}},{"label":"Cote d'Ivoire-CI","loc":{"lat":"7.539989","lon":"-5.54708"}},{"label":"Cook Islands-CK","loc":{"lat":"-21.236736","lon":"-159.777671"}},{"label":"Chile-CL","loc":{"lat":"-35.675147","lon":"-71.542969"}},{"label":"Cameroon-CM","loc":{"lat":"7.369722","lon":"12.354722"}},{"label":"China-CN","loc":{"lat":"35.86166","lon":"104.195397"}},{"label":"Colombia-CO","loc":{"lat":"4.570868","lon":"-74.297333"}},{"label":"Costa Rica-CR","loc":{"lat":"9.748917","lon":"-83.753428"}},{"label":"Cuba-CU","loc":{"lat":"21.521757","lon":"-77.781167"}},{"label":"Cape Verde-CV","loc":{"lat":"16.002082","lon":"-24.013197"}},{"label":"Christmas Island-CX","loc":{"lat":"-10.447525","lon":"105.690449"}},{"label":"Cyprus-CY","loc":{"lat":"35.126413","lon":"33.429859"}},{"label":"Czech Republic-CZ","loc":{"lat":"49.817492","lon":"15.472962"}},{"label":"Germany-DE","loc":{"lat":"51.165691","lon":"10.451526"}},{"label":"Djibouti-DJ","loc":{"lat":"11.825138","lon":"42.590275"}},{"label":"Denmark-DK","loc":{"lat":"56.26392","lon":"9.501785"}},{"label":"Dominica-DM","loc":{"lat":"15.414999","lon":"-61.370976"}},{"label":"Dominican Republic-DO","loc":{"lat":"18.735693","lon":"-70.162651"}},{"label":"Algeria-DZ","loc":{"lat":"28.033886","lon":"1.659626"}},{"label":"Ecuador-EC","loc":{"lat":"-1.831239","lon":"-78.183406"}},{"label":"Estonia-EE","loc":{"lat":"58.595272","lon":"25.013607"}},{"label":"Egypt-EG","loc":{"lat":"26.820553","lon":"30.802498"}},{"label":"Western Sahara-EH","loc":{"lat":"24.215527","lon":"-12.885834"}},{"label":"Eritrea-ER","loc":{"lat":"15.179384","lon":"39.782334"}},{"label":"Spain-ES","loc":{"lat":"40.463667","lon":"-3.74922"}},{"label":"Ethiopia-ET","loc":{"lat":"9.145","lon":"40.489673"}},{"label":"Finland-FI","loc":{"lat":"61.92411","lon":"25.748151"}},{"label":"Fiji-FJ","loc":{"lat":"-16.578193","lon":"179.414413"}},{"label":"Falkland Islands [Islas Malvinas]-FK","loc":{"lat":"-51.796253","lon":"-59.523613"}},{"label":"Micronesia-FM","loc":{"lat":"7.425554","lon":"150.550812"}},{"label":"Faroe Islands-FO","loc":{"lat":"61.892635","lon":"-6.911806"}},{"label":"France-FR","loc":{"lat":"46.227638","lon":"2.213749"}},{"label":"Gabon-GA","loc":{"lat":"-0.803689","lon":"11.609444"}},{"label":"United Kingdom-GB","loc":{"lat":"55.378051","lon":"-3.435973"}},{"label":"Grenada-GD","loc":{"lat":"12.262776","lon":"-61.604171"}},{"label":"Georgia-GE","loc":{"lat":"42.315407","lon":"43.356892"}},{"label":"French Guiana-GF","loc":{"lat":"3.933889","lon":"-53.125782"}},{"label":"Guernsey-GG","loc":{"lat":"49.465691","lon":"-2.585278"}},{"label":"Ghana-GH","loc":{"lat":"7.946527","lon":"-1.023194"}},{"label":"Gibraltar-GI","loc":{"lat":"36.137741","lon":"-5.345374"}},{"label":"Greenland-GL","loc":{"lat":"71.706936","lon":"-42.604303"}},{"label":"Gambia-GM","loc":{"lat":"13.443182","lon":"-15.310139"}},{"label":"Guinea-GN","loc":{"lat":"9.945587","lon":"-9.696645"}},{"label":"Guadeloupe-GP","loc":{"lat":"16.995971","lon":"-62.067641"}},{"label":"Equatorial Guinea-GQ","loc":{"lat":"1.650801","lon":"10.267895"}},{"label":"Greece-GR","loc":{"lat":"39.074208","lon":"21.824312"}},{"label":"South Georgia and the South Sandwich Islands-GS","loc":{"lat":"-54.429579","lon":"-36.587909"}},{"label":"Guatemala-GT","loc":{"lat":"15.783471","lon":"-90.230759"}},{"label":"Guam-GU","loc":{"lat":"13.444304","lon":"144.793731"}},{"label":"Guinea-Bissau-GW","loc":{"lat":"11.803749","lon":"-15.180413"}},{"label":"Guyana-GY","loc":{"lat":"4.860416","lon":"-58.93018"}},{"label":"Gaza Strip-GZ","loc":{"lat":"31.354676","lon":"34.308825"}},{"label":"Hong Kong-HK","loc":{"lat":"22.396428","lon":"114.109497"}},{"label":"Heard Island and McDonald Islands-HM","loc":{"lat":"-53.08181","lon":"73.504158"}},{"label":"Honduras-HN","loc":{"lat":"15.199999","lon":"-86.241905"}},{"label":"Croatia-HR","loc":{"lat":"45.1","lon":"15.2"}},{"label":"Haiti-HT","loc":{"lat":"18.971187","lon":"-72.285215"}},{"label":"Hungary-HU","loc":{"lat":"47.162494","lon":"19.503304"}},{"label":"Indonesia-ID","loc":{"lat":"-0.789275","lon":"113.921327"}},{"label":"Ireland-IE","loc":{"lat":"53.41291","lon":"-8.24389"}},{"label":"Israel-IL","loc":{"lat":"31.046051","lon":"34.851612"}},{"label":"Isle of Man-IM","loc":{"lat":"54.236107","lon":"-4.548056"}},{"label":"India-IN","loc":{"lat":"20.593684","lon":"78.96288"}},{"label":"British Indian Ocean Territory-IO","loc":{"lat":"-6.343194","lon":"71.876519"}},{"label":"Iraq-IQ","loc":{"lat":"33.223191","lon":"43.679291"}},{"label":"Iran-IR","loc":{"lat":"32.427908","lon":"53.688046"}},{"label":"Iceland-IS","loc":{"lat":"64.963051","lon":"-19.020835"}},{"label":"Italy-IT","loc":{"lat":"41.87194","lon":"12.56738"}},{"label":"Jersey-JE","loc":{"lat":"49.214439","lon":"-2.13125"}},{"label":"Jamaica-JM","loc":{"lat":"18.109581","lon":"-77.297508"}},{"label":"Jordan-JO","loc":{"lat":"30.585164","lon":"36.238414"}},{"label":"Japan-JP","loc":{"lat":"36.204824","lon":"138.252924"}},{"label":"Kenya-KE","loc":{"lat":"-0.023559","lon":"37.906193"}},{"label":"Kyrgyzstan-KG","loc":{"lat":"41.20438","lon":"74.766098"}},{"label":"Cambodia-KH","loc":{"lat":"12.565679","lon":"104.990963"}},{"label":"Kiribati-KI","loc":{"lat":"-3.370417","lon":"-168.734039"}},{"label":"Comoros-KM","loc":{"lat":"-11.875001","lon":"43.872219"}},{"label":"Saint Kitts and Nevis-KN","loc":{"lat":"17.357822","lon":"-62.782998"}},{"label":"North Korea-KP","loc":{"lat":"40.339852","lon":"127.510093"}},{"label":"South Korea-KR","loc":{"lat":"35.907757","lon":"127.766922"}},{"label":"Kuwait-KW","loc":{"lat":"29.31166","lon":"47.481766"}},{"label":"Cayman Islands-KY","loc":{"lat":"19.513469","lon":"-80.566956"}},{"label":"Kazakhstan-KZ","loc":{"lat":"48.019573","lon":"66.923684"}},{"label":"Laos-LA","loc":{"lat":"19.85627","lon":"102.495496"}},{"label":"Lebanon-LB","loc":{"lat":"33.854721","lon":"35.862285"}},{"label":"Saint Lucia-LC","loc":{"lat":"13.909444","lon":"-60.978893"}},{"label":"Liechtenstein-LI","loc":{"lat":"47.166","lon":"9.555373"}},{"label":"Sri Lanka-LK","loc":{"lat":"7.873054","lon":"80.771797"}},{"label":"Liberia-LR","loc":{"lat":"6.428055","lon":"-9.429499"}},{"label":"Lesotho-LS","loc":{"lat":"-29.609988","lon":"28.233608"}},{"label":"Lithuania-LT","loc":{"lat":"55.169438","lon":"23.881275"}},{"label":"Luxembourg-LU","loc":{"lat":"49.815273","lon":"6.129583"}},{"label":"Latvia-LV","loc":{"lat":"56.879635","lon":"24.603189"}},{"label":"Libya-LY","loc":{"lat":"26.3351","lon":"17.228331"}},{"label":"Morocco-MA","loc":{"lat":"31.791702","lon":"-7.09262"}},{"label":"Monaco-MC","loc":{"lat":"43.750298","lon":"7.412841"}},{"label":"Moldova-MD","loc":{"lat":"47.411631","lon":"28.369885"}},{"label":"Montenegro-ME","loc":{"lat":"42.708678","lon":"19.37439"}},{"label":"Madagascar-MG","loc":{"lat":"-18.766947","lon":"46.869107"}},{"label":"Marshall Islands-MH","loc":{"lat":"7.131474","lon":"171.184478"}},{"label":"Macedonia [FYROM]-MK","loc":{"lat":"41.608635","lon":"21.745275"}},{"label":"Mali-ML","loc":{"lat":"17.570692","lon":"-3.996166"}},{"label":"Myanmar [Burma]-MM","loc":{"lat":"21.913965","lon":"95.956223"}},{"label":"Mongolia-MN","loc":{"lat":"46.862496","lon":"103.846656"}},{"label":"Macau-MO","loc":{"lat":"22.198745","lon":"113.543873"}},{"label":"Northern Mariana Islands-MP","loc":{"lat":"17.33083","lon":"145.38469"}},{"label":"Martinique-MQ","loc":{"lat":"14.641528","lon":"-61.024174"}},{"label":"Mauritania-MR","loc":{"lat":"21.00789","lon":"-10.940835"}},{"label":"Montserrat-MS","loc":{"lat":"16.742498","lon":"-62.187366"}},{"label":"Malta-MT","loc":{"lat":"35.937496","lon":"14.375416"}},{"label":"Mauritius-MU","loc":{"lat":"-20.348404","lon":"57.552152"}},{"label":"Maldives-MV","loc":{"lat":"3.202778","lon":"73.22068"}},{"label":"Malawi-MW","loc":{"lat":"-13.254308","lon":"34.301525"}},{"label":"Mexico-MX","loc":{"lat":"23.634501","lon":"-102.552784"}},{"label":"Malaysia-MY","loc":{"lat":"4.210484","lon":"101.975766"}},{"label":"Mozambique-MZ","loc":{"lat":"-18.665695","lon":"35.529562"}},{"label":"Namibia-NA","loc":{"lat":"-22.95764","lon":"18.49041"}},{"label":"New Caledonia-NC","loc":{"lat":"-20.904305","lon":"165.618042"}},{"label":"Niger-NE","loc":{"lat":"17.607789","lon":"8.081666"}},{"label":"Norfolk Island-NF","loc":{"lat":"-29.040835","lon":"167.954712"}},{"label":"Nigeria-NG","loc":{"lat":"9.081999","lon":"8.675277"}},{"label":"Nicaragua-NI","loc":{"lat":"12.865416","lon":"-85.207229"}},{"label":"Netherlands-NL","loc":{"lat":"52.132633","lon":"5.291266"}},{"label":"Norway-NO","loc":{"lat":"60.472024","lon":"8.468946"}},{"label":"Nepal-NP","loc":{"lat":"28.394857","lon":"84.124008"}},{"label":"Nauru-NR","loc":{"lat":"-0.522778","lon":"166.931503"}},{"label":"Niue-NU","loc":{"lat":"-19.054445","lon":"-169.867233"}},{"label":"New Zealand-NZ","loc":{"lat":"-40.900557","lon":"174.885971"}},{"label":"Oman-OM","loc":{"lat":"21.512583","lon":"55.923255"}},{"label":"Panama-PA","loc":{"lat":"8.537981","lon":"-80.782127"}},{"label":"Peru-PE","loc":{"lat":"-9.189967","lon":"-75.015152"}},{"label":"French Polynesia-PF","loc":{"lat":"-17.679742","lon":"-149.406843"}},{"label":"Papua New Guinea-PG","loc":{"lat":"-6.314993","lon":"143.95555"}},{"label":"Philippines-PH","loc":{"lat":"12.879721","lon":"121.774017"}},{"label":"Pakistan-PK","loc":{"lat":"30.375321","lon":"69.345116"}},{"label":"Poland-PL","loc":{"lat":"51.919438","lon":"19.145136"}},{"label":"Saint Pierre and Miquelon-PM","loc":{"lat":"46.941936","lon":"-56.27111"}},{"label":"Pitcairn Islands-PN","loc":{"lat":"-24.703615","lon":"-127.439308"}},{"label":"Puerto Rico-PR","loc":{"lat":"18.220833","lon":"-66.590149"}},{"label":"Palestinian Territories-PS","loc":{"lat":"31.952162","lon":"35.233154"}},{"label":"Portugal-PT","loc":{"lat":"39.399872","lon":"-8.224454"}},{"label":"Palau-PW","loc":{"lat":"7.51498","lon":"134.58252"}},{"label":"Paraguay-PY","loc":{"lat":"-23.442503","lon":"-58.443832"}},{"label":"Qatar-QA","loc":{"lat":"25.354826","lon":"51.183884"}},{"label":"Reunion-RE","loc":{"lat":"-21.115141","lon":"55.536384"}},{"label":"Romania-RO","loc":{"lat":"45.943161","lon":"24.96676"}},{"label":"Serbia-RS","loc":{"lat":"44.016521","lon":"21.005859"}},{"label":"Russia-RU","loc":{"lat":"61.52401","lon":"105.318756"}},{"label":"Rwanda-RW","loc":{"lat":"-1.940278","lon":"29.873888"}},{"label":"Saudi Arabia-SA","loc":{"lat":"23.885942","lon":"45.079162"}},{"label":"Solomon Islands-SB","loc":{"lat":"-9.64571","lon":"160.156194"}},{"label":"Seychelles-SC","loc":{"lat":"-4.679574","lon":"55.491977"}},{"label":"Sudan-SD","loc":{"lat":"12.862807","lon":"30.217636"}},{"label":"Sweden-SE","loc":{"lat":"60.128161","lon":"18.643501"}},{"label":"Singapore-SG","loc":{"lat":"1.352083","lon":"103.819836"}},{"label":"Saint Helena-SH","loc":{"lat":"-24.143474","lon":"-10.030696"}},{"label":"Slovenia-SI","loc":{"lat":"46.151241","lon":"14.995463"}},{"label":"Svalbard and Jan Mayen-SJ","loc":{"lat":"77.553604","lon":"23.670272"}},{"label":"Slovakia-SK","loc":{"lat":"48.669026","lon":"19.699024"}},{"label":"Sierra Leone-SL","loc":{"lat":"8.460555","lon":"-11.779889"}},{"label":"San Marino-SM","loc":{"lat":"43.94236","lon":"12.457777"}},{"label":"Senegal-SN","loc":{"lat":"14.497401","lon":"-14.452362"}},{"label":"Somalia-SO","loc":{"lat":"5.152149","lon":"46.199616"}},{"label":"Suriname-SR","loc":{"lat":"3.919305","lon":"-56.027783"}},{"label":"Sao Tome and Principe-ST","loc":{"lat":"0.18636","lon":"6.613081"}},{"label":"El Salvador-SV","loc":{"lat":"13.794185","lon":"-88.89653"}},{"label":"Syria-SY","loc":{"lat":"34.802075","lon":"38.996815"}},{"label":"Swaziland-SZ","loc":{"lat":"-26.522503","lon":"31.465866"}},{"label":"Turks and Caicos Islands-TC","loc":{"lat":"21.694025","lon":"-71.797928"}},{"label":"Chad-TD","loc":{"lat":"15.454166","lon":"18.732207"}},{"label":"French Southern Territories-TF","loc":{"lat":"-49.280366","lon":"69.348557"}},{"label":"Togo-TG","loc":{"lat":"8.619543","lon":"0.824782"}},{"label":"Thailand-TH","loc":{"lat":"15.870032","lon":"100.992541"}},{"label":"Tajikistan-TJ","loc":{"lat":"38.861034","lon":"71.276093"}},{"label":"Tokelau-TK","loc":{"lat":"-8.967363","lon":"-171.855881"}},{"label":"Timor-Leste-TL","loc":{"lat":"-8.874217","lon":"125.727539"}},{"label":"Turkmenistan-TM","loc":{"lat":"38.969719","lon":"59.556278"}},{"label":"Tunisia-TN","loc":{"lat":"33.886917","lon":"9.537499"}},{"label":"Tonga-TO","loc":{"lat":"-21.178986","lon":"-175.198242"}},{"label":"Turkey-TR","loc":{"lat":"38.963745","lon":"35.243322"}},{"label":"Trinidad and Tobago-TT","loc":{"lat":"10.691803","lon":"-61.222503"}},{"label":"Tuvalu-TV","loc":{"lat":"-7.109535","lon":"177.64933"}},{"label":"Taiwan-TW","loc":{"lat":"23.69781","lon":"120.960515"}},{"label":"Tanzania-TZ","loc":{"lat":"-6.369028","lon":"34.888822"}},{"label":"Ukraine-UA","loc":{"lat":"48.379433","lon":"31.16558"}},{"label":"Uganda-UG","loc":{"lat":"1.373333","lon":"32.290275"}},{"label":"U.S. Minor Outlying Islands","loc":{"lat":"28.216667", "lon":"-177.3666667"}},{"label":"United States-US","loc":{"lat":"37.09024","lon":"-95.712891"}},{"label":"Uruguay-UY","loc":{"lat":"-32.522779","lon":"-55.765835"}},{"label":"Uzbekistan-UZ","loc":{"lat":"41.377491","lon":"64.585262"}},{"label":"Vatican City-VA","loc":{"lat":"41.902916","lon":"12.453389"}},{"label":"Saint Vincent and the Grenadines-VC","loc":{"lat":"12.984305","lon":"-61.287228"}},{"label":"Venezuela-VE","loc":{"lat":"6.42375","lon":"-66.58973"}},{"label":"British Virgin Islands-VG","loc":{"lat":"18.420695","lon":"-64.639968"}},{"label":"U.S. Virgin Islands-VI","loc":{"lat":"18.335765","lon":"-64.896335"}},{"label":"Vietnam-VN","loc":{"lat":"14.058324","lon":"108.277199"}},{"label":"Vanuatu-VU","loc":{"lat":"-15.376706","lon":"166.959158"}},{"label":"Wallis and Futuna-WF","loc":{"lat":"-13.768752","lon":"-177.156097"}},{"label":"Samoa-WS","loc":{"lat":"-13.759029","lon":"-172.104629"}},{"label":"Kosovo-XK","loc":{"lat":"42.602636","lon":"20.902977"}},{"label":"Yemen-YE","loc":{"lat":"15.552727","lon":"48.516388"}},{"label":"Mayotte-YT","loc":{"lat":"-12.8275","lon":"45.166244"}},{"label":"South Africa-ZA","loc":{"lat":"-30.559482","lon":"22.937506"}},{"label":"Zambia-ZM","loc":{"lat":"-13.133897","lon":"27.849332"}},{"label":"Zimbabwe-ZW","loc":{"lat":"-19.015438","lon":"29.154857"}}]

var entities = [];

var initEntities = function(){
    countries.forEach(function(e){entities.push(new Entity(e))});
}

var showEntities = function(view, ctx, width, height){
    entities.forEach(function(e){e.show(view, ctx, width, height)});
}

var showEntitiesSVG = function(view, svgCanvas, width, height){
    entities.forEach(function(e){e.showSVG(view, svgCanvas, width, height)});
}

var Entity = function(item){
	var label = item.label;
    var loc = {lat:Number(item.loc.lat), lon:Number(item.loc.lon)};
    console.log(label, loc.lat)
	var inView = function(view){
        return isIn(loc, view.focus, view.hlat, view.hlon);
	}
	this.proj = function(view, width, height){
        var v = vec(view.focus, loc);
        this.x = (width+(v.dlon/view.hlat)*width)/2;
        this.y = (height+(-v.dlat/view.hlon)*height)/2;
        return {x:this.x, y:this.y};
	}
    this.show = function(view, ctx, width, height){
        if (!inView(view)) return;
        var point = this.proj(view, width, height);
        ctx.fillText(label, point.x, point.y-10);
        ctx.beginPath();
        ctx.arc(point.x, point.y, 5, 0, 2*Math.PI);
        ctx.stroke();
    }
    this.showSVG = function(view, svgCanvas, width, height){
        if (!inView(view)) return;
        var point = this.proj(view, width, height);
        var textnode = document.createElementNS(svgns, "text");
        textnode.setAttributeNS(null, "x", point.x);
        textnode.setAttributeNS(null, "y", point.y-10);
        textnode.setAttributeNS(null, "style", text_style);
        textnode.textContent=label;
        svgCanvas.appendChild(textnode);
        var circlenode = document.createElementNS(svgns, "circle");
        circlenode.setAttributeNS(null, "cx", point.x);
        circlenode.setAttributeNS(null, "cy", point.y);
        circlenode.setAttributeNS(null, "r", 5);
        circlenode.setAttributeNS(null, "style", circle_style);
        svgCanvas.appendChild(circlenode);
    }
    return this;
}






